<div class="flex h-screen bg-gray-100 dark:bg-gray-900">

  <!-- Sidebar -->
  <aside
    class="fixed inset-y-0 left-0 z-30 flex flex-col flex-shrink-0 max-h-screen overflow-y-auto transition-all duration-300 ease-in-out bg-white border-r dark:bg-gray-800 dark:border-gray-700"
    [ngClass]="{
      'w-64': isSidebarOpen,
      'w-16': !isSidebarOpen
    }"
    aria-label="Sidebar"
  >
    <!-- Sidebar Header -->
    <div class="flex items-center h-[4.5rem] px-2 pb-auto border-b dark:border-gray-700">
  <!-- Logo + Text -->
  <a routerLink="/" class="flex items-center gap-2 text-base font-semibold text-gray-900 dark:text-white flex-grow" [ngClass]="{'hidden': !isSidebarOpen}">
    <img src="assets/LEADNorth.avif" alt="Lead North Logo" class="h-[4rem] w-auto">
    <span class="text-[14.5px] whitespace-nowrap">CCDA Profiler</span>
  </a>

  <!-- Toggle button -->
  <button
    class="p-1 text-gray-500 rounded hover:bg-gray-200 dark:text-gray-400 dark:hover:bg-gray-700"
    (click)="toggleSidebar()"
    aria-label="Toggle sidebar width"
  >
    <svg *ngIf="isSidebarOpen" class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
    </svg>
    <svg *ngIf="!isSidebarOpen" class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
    </svg>
  </button>
</div>


    <!-- Navigation Links with responsive text -->
    <nav class="flex-1 px-2 py-4 space-y-2">
       <a routerLink="/index" routerLinkActive #homeLink="routerLinkActive" 
          [routerLinkActiveOptions]="{ exact: true }"
          class="flex items-center justify-center md:justify-start px-4 py-2 text-gray-700 rounded-md dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"
          [ngClass]="{'bg-green-50 dark:bg-gray-700 text-green-700 dark:text-green-300': homeLink.isActive}">
          <svg class="w-5 h-5" [ngClass]="{'mr-3': isSidebarOpen}" 
          fill="none" viewBox="0 0 24 24"
          [class.text-green-700]="reportsLink.isActive"
          [class.dark:text-green-300]="reportsLink.isActive"
          [class.text-gray-700]="!reportsLink.isActive"
          [class.dark:text-gray-300]="!reportsLink.isActive">
       <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
     </svg>
         <span [ngClass]="{'hidden': !isSidebarOpen}">Dashboard</span>
       </a>

       <!--<a routerLink="/data-importer" routerLinkActive #dataImporterLink="routerLinkActive"
          class="flex items-center justify-center md:justify-start px-4 py-2 text-gray-700 rounded-md dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"
          [ngClass]="{'bg-green-50 dark:bg-gray-700 text-green-700 dark:text-green-300': dataImporterLink.isActive}">
          <svg class="w-5 h-5" [ngClass]="{'mr-3': isSidebarOpen}" 
          fill="currentColor" viewBox="0 0 99.09 122.88"
          [class.text-green-700]="dataImporterLink.isActive"
          [class.dark:text-green-300]="dataImporterLink.isActive"
          [class.text-gray-700]="!dataImporterLink.isActive"
          [class.dark:text-gray-300]="!dataImporterLink.isActive">
          <path d="M64.64,13,86.77,36.21H64.64V13ZM42.58,71.67a3.25,3.25,0,0,1-4.92-4.25l9.42-10.91a3.26,3.26,0,0,1,4.59-.33,5.14,5.14,0,0,1,.4.41l9.3,10.28a3.24,3.24,0,0,1-4.81,4.35L52.8,67.07V82.52a3.26,3.26,0,1,1-6.52,0V67.38l-3.7,4.29ZM24.22,85.42a3.26,3.26,0,1,1,6.52,0v7.46H68.36V85.42a3.26,3.26,0,1,1,6.51,0V96.14a3.26,3.26,0,0,1-3.26,3.26H27.48a3.26,3.26,0,0,1-3.26-3.26V85.42ZM99.08,39.19c.15-.57-1.18-2.07-2.68-3.56L63.8,1.36A3.63,3.63,0,0,0,61,0H6.62A6.62,6.62,0,0,0,0,6.62V116.26a6.62,6.62,0,0,0,6.62,6.62H92.46a6.62,6.62,0,0,0,6.62-6.62V39.19Zm-7.4,4.42v71.87H7.4V7.37H57.25V39.9A3.71,3.71,0,0,0,61,43.61Z" /></svg>
         <span [ngClass]="{'hidden': !isSidebarOpen}">Import Data</span>
       </a>-->

       <a routerLink="/reports" routerLinkActive #reportsLink="routerLinkActive"
          class="flex items-center justify-center md:justify-start px-4 py-2 text-gray-700 rounded-md dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"
          [ngClass]="{'bg-green-50 dark:bg-gray-700 text-green-700 dark:text-green-300': reportsLink.isActive}">
         <svg class="w-5 h-5" [ngClass]="{'mr-3': isSidebarOpen}" 
              fill="none" viewBox="0 0 24 24"
              [class.text-green-700]="reportsLink.isActive"
              [class.dark:text-green-300]="reportsLink.isActive"
              [class.text-gray-700]="!reportsLink.isActive"
              [class.dark:text-gray-300]="!reportsLink.isActive">
           <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
         </svg>
         <span [ngClass]="{'hidden': !isSidebarOpen}">Reports</span>
       </a>

       <a routerLink="/settings" routerLinkActive #configurationLink="routerLinkActive"
          class="flex items-center justify-center md:justify-start px-4 py-2 text-gray-700 rounded-md dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"
          [ngClass]="{'bg-green-50 dark:bg-gray-700 text-green-700 dark:text-green-300': configurationLink.isActive}">
          <svg class="w-5 h-5" [ngClass]="{'mr-3': isSidebarOpen}" 
          fill="none" viewBox="0 0 24 24"
          [class.text-green-700]="configurationLink.isActive"
          [class.dark:text-green-300]="configurationLink.isActive"
          [class.text-gray-700]="!configurationLink.isActive"
          [class.dark:text-gray-300]="!configurationLink.isActive">
          <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12,15.5A3.5,3.5 0 0,1 8.5,12A3.5,3.5 0 0,1 12,8.5A3.5,3.5 0 0,1 15.5,12A3.5,3.5 0 0,1 12,15.5M19.43,12.97C19.47,12.65 19.5,12.33 19.5,12C19.5,11.67 19.47,11.34 19.43,11L21.54,9.37C21.73,9.22 21.78,8.95 21.66,8.73L19.66,5.27C19.54,5.05 19.27,4.96 19.05,5.05L16.56,6.05C16.04,5.66 15.5,5.32 14.87,5.07L14.5,2.42C14.46,2.18 14.25,2 14,2H10C9.75,2 9.54,2.18 9.5,2.42L9.13,5.07C8.5,5.32 7.96,5.66 7.44,6.05L4.95,5.05C4.73,4.96 4.46,5.05 4.34,5.27L2.34,8.73C2.21,8.95 2.27,9.22 2.46,9.37L4.57,11C4.53,11.34 4.5,11.67 4.5,12C4.5,12.33 4.53,12.65 4.57,12.97L2.46,14.63C2.27,14.78 2.21,15.05 2.34,15.27L4.34,18.73C4.46,18.95 4.73,19.03 4.95,18.95L7.44,17.94C7.96,18.34 8.5,18.68 9.13,18.93L9.5,21.58C9.54,21.82 9.75,22 10,22H14C14.25,22 14.46,21.82 14.5,21.58L14.87,18.93C15.5,18.67 16.04,18.34 16.56,17.94L19.05,18.95C19.27,19.03 19.54,18.95 19.66,18.73L21.66,15.27C21.78,15.05 21.73,14.78 21.54,14.63L19.43,12.97Z" /></svg>
         <span [ngClass]="{'hidden': !isSidebarOpen}">Configuration</span>
       </a>

       <a routerLink="/help-page" routerLinkActive #helpLink="routerLinkActive"
          class="flex items-center justify-center md:justify-start px-4 py-2 text-gray-700 rounded-md dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"
          [ngClass]="{'bg-green-50 dark:bg-gray-700 text-green-700 dark:text-green-300': helpLink.isActive}">
         <svg class="w-5 h-5" [ngClass]="{'mr-3': isSidebarOpen}" 
              fill="none" viewBox="0 0 24 24"
              [class.text-green-700]="helpLink.isActive"
              [class.dark:text-green-300]="helpLink.isActive"
              [class.text-gray-700]="!helpLink.isActive"
              [class.dark:text-gray-300]="!helpLink.isActive">
           <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9 5.25h.008v.008H12v-.008z"></path>
         </svg>
         <span [ngClass]="{'hidden': !isSidebarOpen}">Help</span>
       </a>
    </nav>

  
  </aside>


  <!-- Main Content Area (including Header and Footer) removed overflow-hidden-->
  <div class="relative flex flex-col flex-1 min-w-0">

    <!-- Inside the <header> element -->
<header
  class="sticky top-0 z-20 flex items-center justify-between h-16 min-h-16 px-4 bg-emerald-900 dark:bg-emerald-950 text-white transition-all duration-300 ease-in-out"
  [ngClass]="{
      'lg:ml-64': isSidebarOpen,  
      'lg:ml-16': !isSidebarOpen      
  }"
>

  <!-- Page Title -->
  <div class="flex-1 flex items-center h-full min-h-full text-center md:text-left md:pl-4">
    <h1 class="text-lg font-semibold text-white dark:text-gray-200 uppercase truncate">
      {{ currentPageTitle }}
    </h1>
  </div>

</header>

    <!-- Content Outlet -->
    <main
        class="flex-1 p-4 md:p-6 -mt-8 transition-all duration-300 ease-in-out bg-gray-50 dark:bg-gray-900 border-2 border-gray-300 dark:border-gray-700 rounded-lg shadow-sm"
        [ngClass]="{
            'lg:ml-64': isSidebarOpen,  
            'lg:ml-16': !isSidebarOpen       
        }"
    >
        <!-- Where routed components appear -->
        <div class="mx-auto px-4 pb-8">
          <div class="bg-white dark:bg-gray-800 shadow-md rounded-lg p-6">
            <router-outlet></router-outlet>
          </div>
        </div>

    </main>

<!-- Footer -->
  <footer
  class="px-4 py-2 mt-auto text-center text-xs bg-emerald-900 dark:bg-emerald-950 transition-all duration-300 ease-in-out"
  [ngClass]="{
      'lg:ml-64': isSidebarOpen,
      'lg:ml-16': !isSidebarOpen
  }"
>
  <div class="container mx-auto px-4 py-4">
    <div class="flex flex-col md:flex-row md:items-center md:justify-end space-y-2 md:space-y-0 md:space-x-4 text-xs md:text-sm text-emerald-200">
      <span class="text-center md:text-right">&copy; {{ currentYear }} LEAD North, LLC. All rights reserved.</span>
    
    </div>
  </div>
</footer>

</div>

<!-- Optional: Overlay for smaller screens when sidebar is open -->
<div
*ngIf="isSidebarOpen"
(click)="toggleSidebar()"
class="fixed inset-0 z-20 bg-black opacity-50 lg:hidden"
aria-hidden="true"
></div>

</div>
